<%- include('partials/header') %>

<section class="pt-32 pb-12 bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">Whiz POS for Windows</h1>
        <p class="text-xl text-gray-600">The Heart of Your Operations.</p>
    </div>
</section>

<section class="py-16 bg-gray-50">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="bg-white p-8 rounded-2xl border border-gray-200 shadow-lg">
             <h2 class="text-2xl font-bold text-gray-900 mb-6">Get the Desktop Application</h2>

             <% if (user) { %>
                <% if (user.status === 'approved') { %>
                   <div>
                       <p class="text-emerald-600 mb-4 font-medium">Your account is verified.</p>
                       <a href="/download/windows" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 w-full sm:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg> Download Installer (.exe) - v5.2.0
                      </a>
                      <p class="text-xs text-gray-500 mt-4">Windows 10/11, 4GB RAM recommended.</p>
                   </div>
                <% } else if (user.status === 'pending') { %>
                   <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                      <p class="text-yellow-700">Your request is pending verification by the admin.</p>
                   </div>
                <% } else if (user.status === 'rejected') { %>
                    <div class="p-4 bg-red-50 border border-red-200 rounded-lg text-left">
                      <p class="text-red-700 font-bold">Your request was rejected.</p>
                      <% if (user.rejectionReason) { %>
                        <p class="text-red-600 mt-2"><strong>Reason:</strong> <%= user.rejectionReason %></p>
                      <% } %>

                      <% if (!user.reviewRequested) { %>
                        <form action="/auth/reapply" method="POST" class="mt-4">
                           <button type="submit" class="text-white bg-red-600 hover:bg-red-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Re-apply for Review</button>
                        </form>
                      <% } else { %>
                        <p class="text-orange-600 mt-2"><i>You have requested a review. Please wait for admin action.</i></p>
                      <% } %>
                   </div>
                <% } %>
             <% } else { %>
               <div class="text-center">
                 <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto text-gray-400 mb-4"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                 <p class="text-gray-600 mb-6">Access to the Windows installer is protected. Please request access or login.</p>
                 <div class="flex justify-center gap-4">
                    <a href="/request-access" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700">Request Access</a>
                    <a href="/login" class="inline-flex items-center justify-center px-6 py-3 border border-blue-600 text-base font-medium rounded-md shadow-sm text-blue-600 bg-transparent hover:bg-blue-50">Login</a>
                 </div>
               </div>
             <% } %>
        </div>

        <div class="mt-12 text-left">
            <h3 class="text-xl font-bold text-gray-900 mb-4">Installation Guide</h3>
            <ol class="list-decimal list-inside space-y-2 text-gray-600">
              <li>Download the installer (once verified).</li>
              <li>Run the setup file as Administrator.</li>
              <li>Follow the setup wizard to complete installation.</li>
            </ol>
        </div>
    </div>
</section>

<section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
       <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">Key Features</h2>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <% const features = [
            { title: 'Dashboard', desc: 'Real-time sales tracking.', img: '/assets/main_pos_and_cart.jpg' },
            { title: 'Point of Sale', desc: 'Fast checkout with Barcode scanning and Touch interface.', img: '/assets/desktop_checkout_modal.jpg' },
            { title: 'Inventory Management', desc: 'Track stock levels, set low-stock alerts.', img: '/assets/back_office_inventory_page.jpg' },
            { title: 'Reports', desc: 'Generate Z-Reports, Monthly Profit/Loss statements.', img: '/assets/back_office_sales_view.jpg' },
            { title: 'Settings', desc: 'Configure printers, tax rates, and user roles.', img: '/assets/desktop_login.jpg' },
          ] %>
          <% features.forEach(feature => { %>
            <div class="bg-white rounded-xl overflow-hidden border border-gray-200 shadow-sm hover:shadow-md transition-shadow">
               <div class="h-48 relative bg-gray-100">
                  <img src="<%= feature.img %>" alt="<%= feature.title %>" class="w-full h-full object-cover">
               </div>
               <div class="p-6">
                  <h3 class="text-lg font-bold text-gray-900 mb-2"><%= feature.title %></h3>
                  <p class="text-gray-600 text-sm"><%= feature.desc %></p>
               </div>
            </div>
          <% }) %>
       </div>
    </div>
</section>

<%- include('partials/footer') %>
